<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Portfolio acad√©mique ‚Äì Objectifs, comp√©tences, cours, projets, preuves, r√©flexions et plan d'action." />
    <title>Portfolio acad√©mique</title>
    <link rel="stylesheet" href="../styles.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <header class="site-header">
      <nav class="nav container" aria-label="Navigation principale">
        <a href="#intro" class="brand" aria-label="Aller au d√©but"></a>
        <ul class="nav-links">
          <li><a href="#intro">Pr√©sentation</a></li>
          <li><a href="#cours">Cours</a></li>
          <li><a href="#projets">Projets</a></li>
          <li><a href="#cv-contact">CV & Contact</a></li>
        </ul>
        <div class="nav-actions">
          <button id="themeToggle" class="icon-btn" aria-label="Basculer le th√®me" aria-pressed="false" title="Th√®me clair/sombre">
            <span class="icon">üåì</span>
          </button>
          <button class="icon-btn nav-toggle" aria-label="Ouvrir/fermer le menu">‚ò∞</button>
        </div>
      </nav>
    </header>

    <main>
      <section id="intro" class="section hero">
        <div class="container">
          <p class="eyebrow">Portfolio ISS</p>
          <h1>Loubejac Combalbert Jean-Philippe</h1>
        </div>
      </section>

      <section id="objectifs" class="section alt">
        <div class="container">
          <h2>Pourquoi avoir rejoint ISS ?</h2>
          <div class="card">
            <p class="muted">petit texte sympathique</p>
          </div>
        </div>
      </section>

      <section id="cours" class="section alt">
        <div class="container">
          <h2>Cours/UE suivis et r√©sultats d'apprentissage</h2>
          <p class="muted">Cliquez sur un cours pour voir les d√©tails</p>
          <ol class="timeline" id="courses-timeline" aria-label="Parcours acad√©mique d√©taill√©">
            <!-- Les cours seront g√©n√©r√©s ici par JavaScript -->
          </ol>
        </div>
      </section>

      <section id="projets" class="section">
        <div class="container">
          <div class="section-header">
            <h2>Projets acad√©miques</h2>
          </div>
          <div class="grid projects-grid">
            <article class="card project" data-type="academic" data-tags="web,data">
              <div class="project-header">
                <h3>Titre du projet</h3>
                <span class="project-type project-type-academic">Acad√©mique</span>
              </div>
              <p>R√©sum√© (contexte, objectifs, m√©thodologie, r√©sultats, limites).</p>
              <ul class="tags"><li>M√©thodo</li><li>Technos</li><li>R√¥le</li></ul>
              <div class="links">
                <a class="btn sm" href="#" target="_blank" rel="noopener">Rapport</a>
                <a class="btn sm" href="#" target="_blank" rel="noopener">Code</a>
                <a class="btn sm" href="#" target="_blank" rel="noopener">D√©mo</a>
              </div>
            </article>
            <!-- Dupliquez la carte pour d'autres projets -->
          </div>
        </div>
      </section>

      <!-- <section id="preuves" class="section alt">
        <div class="container">
          <h2>Preuves et attestations</h2>
          <div class="card">
            <p class="muted">Liez ici des artefacts: attestations, certificats, rapports, captures d'√©cran, liens vers d√©p√¥ts, etc. Anonymisez les donn√©es sensibles et citez les sources si n√©cessaire.</p>
            <ul>
              <li><a href="#">Certification / Attestation (PDF)</a></li>
              <li><a href="#">Rapport de projet</a></li>
              <li><a href="#">D√©p√¥t Git</a></li>
            </ul>
          </div>
        </div>
      </section> -->

      <!-- <section id="reflexion" class="section">
        <div class="container">
          <h2>R√©flexion critique</h2>
          <div class="card">
            <p>Analysez vos r√©ussites, difficult√©s, feedbacks re√ßus et axes d'am√©lioration. Reliez aux objectifs initiaux.</p>
          </div>
        </div>
      </section> -->

      <!-- <section id="plan" class="section alt">
        <div class="container">
          <h2>Plan d'action / Progression</h2>
          <div class="card">
            <ul>
              <li>√âtape 1 ‚Äì Action ‚Äì √âch√©ance ‚Äì Indicateur de r√©ussite</li>
              <li>√âtape 2 ‚Äì Action ‚Äì √âch√©ance ‚Äì Indicateur de r√©ussite</li>
            </ul>
          </div>
        </div>
      </section> -->
      <section id="contact" class="section">
          <div class="container">
              <h2>Contact</h2>
              <ul class="contact-list"></ul>
          </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container">
        <p>¬© <span id="year"></span> Portfolio acad√©mique</p>
      </div>
    </footer>

    <!-- Modale pour les d√©tails des cours -->
    <div id="courseModal" class="modal" aria-hidden="true">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalCourseTitle">Titre du cours</h2>
          <button class="modal-close" aria-label="Fermer">&times;</button>
        </div>
        <div class="modal-body">
          <div class="modal-body-layout">
            <aside class="modal-sidebar">
              <div class="modal-sidebar-sticky" id="modalSidebarContent">
                <!-- Generated by JS -->
              </div>
            </aside>
            <div class="modal-content-scroll">
              <div id="tab-context" class="detail-section active">
                <h3>Contexte</h3>
                <div id="modalContext"></div>
              </div>
              <div id="tab-technique" class="detail-section">
                <h3>Technique</h3>
                <div id="modalTechnique"></div>
              </div>
              <div id="tab-analyse" class="detail-section">
                <h3>Analyse</h3>
                <div id="modalAnalyse"></div>
              </div>
              <div id="tab-competences" class="detail-section">
                <h3>Comp√©tences</h3>
                <div class="table-responsive">
                  <table class="skills-table" style="width: 100%; border-collapse: collapse;">
                    <thead>
                      <tr style="border-bottom: 1px solid var(--border); text-align: left;">
                        <th style="padding: 12px;">Comp√©tence</th>
                        <th style="padding: 12px;">Note</th>
                        <th style="padding: 12px;">Commentaires</th>
                      </tr>
                    </thead>
                    <tbody id="modalSkillsBody">
                      <!-- Les comp√©tences seront g√©n√©r√©es ici par JavaScript -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="data.js"></script>
    <script src="../script.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const data = window.__ACADEMIC_DATA__;
        const timeline = document.getElementById('courses-timeline');
        const skillsBody = document.getElementById('skills-tbody');
        const modal = document.getElementById('courseModal');
        const closeBtn = document.querySelector('.modal-close');
        
        // Elements de la modale
        const mTitle = document.getElementById('modalCourseTitle');
        const mContext = document.getElementById('modalContext');
        const mTechnique = document.getElementById('modalTechnique');
        const mAnalyse = document.getElementById('modalAnalyse');
        const mSkillsBody = document.getElementById('modalSkillsBody');
        const mSidebarContent = document.getElementById('modalSidebarContent');
        
        // Gestion de la navigation (Scroll)
        function scrollToSection(targetId) {
          const section = document.getElementById(`tab-${targetId}`);
          if (section) {
            section.scrollIntoView({ behavior: 'smooth' });
          }
        }

        function renderSidebar(activeCourseId) {
          mSidebarContent.innerHTML = '';
          
          if (data && data.courses) {
            data.courses.forEach(course => {
              const courseItem = document.createElement('div');
              courseItem.className = 'nav-course-item';
              
              const courseBtn = document.createElement('button');
              courseBtn.className = 'nav-course-btn';
              if (course.id === activeCourseId) courseBtn.classList.add('active');
              courseBtn.textContent = course.title;
              courseBtn.onclick = () => openModal(course);
              
              courseItem.appendChild(courseBtn);
              
              if (course.id === activeCourseId) {
                const sectionsContainer = document.createElement('div');
                sectionsContainer.className = 'nav-course-sections';
                
                const sections = [
                  { id: 'context', label: 'Contexte' },
                  { id: 'technique', label: 'Technique' },
                  { id: 'analyse', label: 'Analyse' },
                  { id: 'competences', label: 'Comp√©tences' }
                ];
                
                sections.forEach(sec => {
                  const secBtn = document.createElement('button');
                  secBtn.className = 'nav-section-btn';
                  secBtn.textContent = sec.label;
                  secBtn.onclick = (e) => {
                    e.stopPropagation();
                    scrollToSection(sec.id);
                  };
                  sectionsContainer.appendChild(secBtn);
                });
                
                courseItem.appendChild(sectionsContainer);
              }
              
              mSidebarContent.appendChild(courseItem);
            });
          }
        }

        if (data) {
          // G√©n√©rer les cours
          if (data.courses && timeline) {
            data.courses.forEach(course => {
              const li = document.createElement('li');
              li.className = 'timeline-item course-item';
              li.dataset.courseId = course.id;
              
              const tagsHtml = course.tags.map(tag => `<li>${tag}</li>`).join('');
              
              li.innerHTML = `
                <div class="tl-header">
                  <h3>${course.title}</h3>
                  <span class="muted">${course.meta}</span>
                </div>
                <p>${course.description}</p>
                <ul class="tags">${tagsHtml}</ul>
              `;
              
              li.addEventListener('click', () => openModal(course));
              timeline.appendChild(li);
            });
          }
        }

        function openModal(course) {
          // Remplir la modale avec les donn√©es de l'objet course
          mTitle.textContent = course.title;
          mContext.innerHTML = course.details?.context || "Contexte non renseign√©.";
          mTechnique.innerHTML = course.details?.technique || "D√©tails techniques non renseign√©s.";
          mAnalyse.innerHTML = course.details?.analyse || "Analyse non renseign√©e.";
          
          // Remplir le tableau des comp√©tences
          mSkillsBody.innerHTML = '';
          if (course.details?.competences && Array.isArray(course.details.competences)) {
            course.details.competences.forEach(skill => {
              const tr = document.createElement('tr');
              tr.style.borderBottom = '1px solid var(--border)';
              tr.innerHTML = `
                <td style="padding: 12px; font-weight: 600;">${skill.name}</td>
                <td style="padding: 12px; color: var(--accent);">${skill.grade}</td>
                <td style="padding: 12px; color: var(--muted);">${skill.comment}</td>
              `;
              mSkillsBody.appendChild(tr);
            });
          } else {
             mSkillsBody.innerHTML = '<tr><td colspan="3" style="padding: 12px; text-align: center; color: var(--muted);">Aucune comp√©tence renseign√©e.</td></tr>';
          }

          // Afficher
          modal.classList.add('show');
          document.body.style.overflow = 'hidden';
          
          // Render Sidebar
          renderSidebar(course.id);

          // Reset scroll
          const layoutScroll = document.querySelector('.modal-body-layout');
          if (layoutScroll) layoutScroll.scrollTop = 0;
        }

        function closeModal() {
          modal.classList.remove('show');
          document.body.style.overflow = '';
        }

        if (closeBtn) closeBtn.addEventListener('click', closeModal);

        // Fermer avec Echap
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && modal.classList.contains('show')) closeModal();
        });
      });
    </script>
  </body>
</html>
